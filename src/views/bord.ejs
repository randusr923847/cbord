<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Campus Bord - College Event Website</title>
    <link rel="icon" type="image/x-icon" href="/static/images/favicon.png" />
    <link href="/static/font-files/montserrat.css" rel="stylesheet" />
    <link rel="stylesheet" href="/static/css/style.css" />
  </head>
  <body>
    <%- include('partials/header.ejs') %>

    <div class="sub-header">
      <button class="header-button" onclick="window.location.href = '/notifs';">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="38"
          height="41"
          fill="currentColor"
          class="bi bi-bell-fill"
          viewBox="-2 -12 16 41"
        >
          <path
            d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2m.995-14.901a1 1 0 1 0-1.99 0A5 5 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901"
          />
        </svg>
        <p>Get Notified</p>
      </button>
    </div>

    <div class="container">
      <div id="event-cont" class="event-container">
        <div id="no-events-cont" hidden="none">
          <br /><br />
          <h3>We couldn't find any events happening today :(</h3>
          <h3>Be the first to submit one!</h3>
        </div>
        <div id="error-cont" hidden="none">
          <br /><br />
          <h3>Something went wrong T-T</h3>
          <h3>Please let us know so we can fix the issue.</h3>
        </div>
        <div id="net-error-cont" hidden="none">
          <br /><br />
          <h3>Network connection failed :(</h3>
          <h3>Please check your connection and reload the page.</h3>
        </div>

        <% if (dates) { let dates_obj = Object.keys(dates); if (dates_obj.length
        == 0) { %>
        <script>
          document.getElementById('no-events-cont').removeAttribute('hidden');
        </script>
        <% } const today = new Date(); const tomorrow = new Date(new
        Date().setDate(today.getDate() + 1)); const todayDate =
        dateString(today); const tomorrowDate = dateString(tomorrow);
        dates_obj.forEach(date => { let eventDate = date; if (eventDate ==
        todayDate) { eventDate = "Today"; } else if (eventDate == tomorrowDate)
        { eventDate = "Tomorrow"; } %>
        <h3 id="<%= date %>" class="event-date"><%= eventDate %></h3>
        <%
          let events = dates[date];
          for (let i = 0; i < events.length; i++) {
        %>
        <%- include('partials/card.ejs', {id:events[i].id, event:events[i], desc: false, full_time: false, submitted: false }) %>
        <%
            }
          });
        }
        %>
      </div>

      <div id="loading-cont" class="loading-container" hidden="none">
        <p>Loading events ...</p>
      </div>
    </div>

    <%- include('partials/footer.ejs') %>

    <script>
      const EVENTS_PER_LOAD = parseInt(<%= events_per_load %>);
    </script>
    <script src="/static/js/ejs.min.js" charset="utf-8"></script>
    <script src="/static/js/cardpartial.js" charset="utf-8"></script>
    <script src="/static/js/script.js" charset="utf-8"></script>
  </body>
</html>
